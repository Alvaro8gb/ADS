class Student:
    def __init__(self, name, surname="", phone=""):
        self.name = name
        self.surname = surname
        self.phone = phone
        self.score = 0
        self.instructor = None

class Instructor:
    def __init__(self, name, surname="", phone=""):
        self.name = name
        self.surname = surname
        self.phone = phone
        self.students = set()  # Fixed typo

class DrivingSchool:
    def __init__(self):
        self.students = {}
        self.instructors = {}

    def alta(self, A, P, surname_A="", phone_A="", surname_P="", phone_P=""):
        # Create instructor i
        if P not in self.instructors:
            self.instructors[P] = Instructor(P, surname_P, phone_P)
            
      
        if A not in self.students:
            self.students[A] = Student(A, surname_A, phone_A)
        else:
           
            prev_instructor = self.students[A].instructor
            if prev_instructor and prev_instructor in self.instructors:
                self.instructors[prev_instructor].students.discard(A)
        
  
        self.students[A].instructor = P  # Critical fix
        self.instructors[P].students.add(A)

    def es_alumno(self, A, P):
        if A in self.students and self.students[A].instructor == P:
            return f"{A} es alumno de {P}"
        return f"{A} no es alumno de {P}"


    def puntuacion(self, A):
        if A not in self.students:
            raise ValueError(f"El alumno {A} no esta matriculado.")
        return self.students[A].score

    def actualizar(self, A, N):
        if A not in self.students:
            raise ValueError(f"El alumno {A} no esta matriculado.")
        self.students[A].score += N

    def examen(self, P, X):
        if P not in self.instructors:
            return []
        return sorted([A for A in self.instructors[P].students 
                      if self.students[A].score >= X])

    def aprobar(self, A):
        if A not in self.students:
            raise ValueError(f"El alumno {A} no esta matriculado.")
        
        instructor = self.students[A].instructor
        if instructor and instructor in self.instructors:
            self.instructors[instructor].students.discard(A)
        del self.students[A]
